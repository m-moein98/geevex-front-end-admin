<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-md-6">
        <h4>Deposits Management</h4>
      </div>
      
      <div class="col-md-6 text-right">
        <button nbButton status="success" (click)="applyAll()" class="apply-all-btn">
          <nb-icon icon="checkmark-circle"></nb-icon>
          Apply All
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <!-- Filters -->
    <div class="row mb-3">
      <div class="col-md-3">
        <nb-form-field>
          <label for="status-filter">Status</label>
          <nb-select 
            id="status-filter" 
            fullWidth 
            placeholder="Filter by status"
            [(selected)]="selectedStatus"
            (selectedChange)="onStatusChange($event)">
            <nb-option *ngFor="let status of depositStatuses" [value]="status">
              {{ status }}
            </nb-option>
          </nb-select>
        </nb-form-field>
      </div>
      
      <div class="col-md-3">
        <nb-form-field>
          <label for="type-filter">Type</label>
          <nb-select 
            id="type-filter" 
            fullWidth 
            placeholder="Filter by type"
            [(selected)]="selectedType"
            (selectedChange)="onTypeChange($event)">
            <nb-option *ngFor="let type of depositTypes" [value]="type">
              {{ type }}
            </nb-option>
          </nb-select>
        </nb-form-field>
      </div>
      
      <div class="col-md-3">
        <nb-form-field>
          <label for="coin-filter">Coin</label>
          <input
            nbInput
            id="coin-filter"
            fullWidth
            list="coinList"
            placeholder="Select coin"
            [value]="getCoinDisplay(coinId)"
            (input)="onCoinInput($event)">
          <datalist id="coinList">
            <option *ngFor="let coin of coins" [value]="coin.symbol + ' - ' + coin.name"></option>
          </datalist>
        </nb-form-field>
      </div>
      
      <div class="col-md-3">
        <nb-form-field>
          <label for="network-filter">Network</label>
          <input 
            nbInput 
            id="network-filter" 
            type="text" 
            fullWidth 
            placeholder="Enter network"
            [(ngModel)]="network"
            (ngModelChange)="onNetworkChange($event)">
        </nb-form-field>
      </div>
    </div>
    
    <div class="row mb-3">
      <div class="col-md-12">
        <button 
          nbButton 
          status="primary" 
          size="small"
          (click)="resetFilters()">
          <nb-icon icon="refresh-outline"></nb-icon>
          Reset Filters
        </button>
      </div>
    </div>
    
    <!-- Data Table -->
    <div *ngIf="isLoading" class="text-center">
      <nb-spinner></nb-spinner>
    </div>
    
    <ng2-smart-table
      *ngIf="!isLoading"
      [settings]="settings"
      [source]="source"
      (edit)="onEdit($event)">
    </ng2-smart-table>
  </nb-card-body>
</nb-card>