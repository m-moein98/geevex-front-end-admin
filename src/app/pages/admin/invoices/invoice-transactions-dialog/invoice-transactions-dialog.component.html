<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-md-10">
        <h4>Invoice Transactions - ID: {{ invoice?.id }}</h4>
      </div>
      <div class="col-md-2 text-right">
        <button nbButton status="danger" (click)="close()">
          <nb-icon icon="close-outline"></nb-icon>
          Close
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <!-- Invoice Info -->
    <div class="row mb-3" *ngIf="invoice">
      <div class="col-md-12">
        <nb-card>
          <nb-card-body>
            <div class="row">
              <div class="col-md-3">
                <strong>Invoice ID:</strong> {{ invoice.id }}
              </div>
              <div class="col-md-3">
                <strong>Created:</strong> {{ invoice.created_at | date:'medium' }}
              </div>
              <div class="col-md-3">
                <strong>User ID:</strong> {{ invoice.user_id }}
              </div>
              <div class="col-md-3">
                <strong>Finalized:</strong> {{ invoice.is_finalized ? 'Yes' : 'No' }}
              </div>
              <div class="col-md-12 mt-2">
                <strong>Total Price:</strong> {{ invoice.price | currency }}
              </div>
            </div>
          </nb-card-body>
        </nb-card>
      </div>
    </div>

    <!-- Transactions Table -->
    <div class="row">
      <div class="col-md-12">
        <h5>Transactions</h5>
        <ng2-smart-table
          [settings]="settings"
          [source]="source">
        </ng2-smart-table>

        <!-- Loading Spinner -->
        <div *ngIf="isLoading" class="text-center py-4">
          <nb-spinner status="primary"></nb-spinner>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>